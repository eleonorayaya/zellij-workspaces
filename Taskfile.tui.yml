version: '3'

env:
  BUBBLETEA_LOG: tui.log

tasks:
  build:
    sources:
      - 'internal/**/*.go'
      - 'cmd/daemon/main.go'
    cmds:
      - go build -o out/tui cmd/tui/main.go
  deploy:
    deps:
      - build
    cmds:
      - cp ./out/tui /usr/local/bin/utena
  run:
    deps:
      - build
    cmds:
      - ./out/tui
    interactive: true
  logs:
    cmds:
      - tail -f "$BUBBLETEA_LOG"
